// Generated by CoffeeScript 1.3.3
var socket;

socket = io.connect("/");

socket.on("message", function(data) {
  return console.log(data);
});

socket.emit("message", "a letter for the server");

window.onkeypress = function(event) {
  if (event.keyCode === 122) {
    return pongRound.addAction(new Swing(new Date().valueOf(), 0, "right", null));
  } else if (event.keyCode = 120) {
    return pongRound.addAction(new Swing(new Date().valueOf(), 1, "right", null));
  }
};

window.onload = function() {
  var COURT_SIZE, ball, court, renderingInterval;
  COURT_SIZE = 500;
  court = document.getElementById("court");
  court.style.position = "absolute";
  court.style.top = "0px";
  court.style.left = "0px";
  court.style.backgroundColor = "red";
  ball = document.getElementById("ball");
  ball.style.width = "10px";
  ball.style.height = "10px";
  ball.style.backgroundColor = "blue";
  ball.style.position = "absolute";
  return renderingInterval = setInterval(function() {
    var currentState, displayMultiplier, endTime, startTime;
    startTime = new Date().valueOf();
    currentState = pongRound.getStateAtTime(new Date().valueOf());
    displayMultiplier = 300;
    court.style.width = currentState.courtWidth * displayMultiplier + "px";
    court.style.height = currentState.courtLength * displayMultiplier + "px";
    ball.style.left = currentState.ballLocX * displayMultiplier + "px";
    ball.style.bottom = currentState.ballLocY * displayMultiplier + "px";
    if (currentState.winner != null) {
      alert("Player " + currentState.winner + " has won!");
      window.location.reload(false);
    }
    return endTime = new Date().valueOf();
  }, 10);
};

window.stop = function() {
  return clearInterval(renderingInterval);
};
